;/*FB_PKG_DELIM*/

__d("IGDDisappearingMessagesBlockedComposer.react",["fbt","MWXComposerBanner.react","MessengerWebUXLogger","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(7),d=a.extraLoggingData;a=a.loggingEventName;var e;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=h._("__JHASH__HYBQYSVaqer__JHASH__"),b[0]=e):e=b[0];e=e;var f;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._("__JHASH__Iv_ZxhLNItG__JHASH__"),b[1]=f):f=b[1];f=f;var g;b[2]!==a||b[3]!==d?(g={eventName:a,extraData:d},b[2]=a,b[3]=d,b[4]=g):g=b[4];a=c("MessengerWebUXLogger").useImpressionLoggerRef(g);b[5]!==a?(d=k.jsx(c("MWXComposerBanner.react"),{bodyText:f,headerText:e,ref:a}),b[5]=a,b[6]=d):d=b[6];return d}g["default"]=a}),226);
__d("IGDInviteModelUtils",["qex"],(function(a,b,c,d,e,f,g){"use strict";a=function(){return c("qex")._("1244")===!0};b=function(){return c("qex")._("1245")===!0};g.shouldUseInviteModelWithoutExposure=a;g.shouldUseInviteModelWithExposure=b}),98);
__d("issueEditInstamadilloMessage",["CometTaskFramework","MAWCurrentUser","cr:2876"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return b("cr:2876")!=null?b("cr:2876").sendEditMessage(a):c("CometTaskFramework")(d("MAWCurrentUser").getID()).issueTask("igd_edit_message",a)}g["default"]=a}),98);
__d("useCancelEditingOnEsc",["Lexical","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.c;function a(a,b,c){var e=j(5),f=c===void 0?null:c,g;e[0]!==a||e[1]!==b||e[2]!==f?(c=function(){return a.registerCommand(d("Lexical").KEY_ESCAPE_COMMAND,function(a){a.preventDefault();a.stopImmediatePropagation();a.stopPropagation();b(null);f&&f();return!0},d("Lexical").COMMAND_PRIORITY_CRITICAL)},g=[a,b,f],e[0]=a,e[1]=b,e[2]=f,e[3]=c,e[4]=g):(c=e[3],g=e[4]);i(c,g)}g.useCancelEditingrOnEsc=a}),98);
__d("useShowNotEditableMessageToast",["fbt","IGDSErrorPanoOutlineIcon.react","PolarisToastConstants","react","useIGDSToaster"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;b.useCallback;var k=b.c,l=d("PolarisToastConstants").TOAST_ANIM_DURATION_S*1e3;function a(){var a=k(2),b=c("useIGDSToaster")(),d;a[0]!==b?(d=function(){b.add({icon:j.jsx(c("IGDSErrorPanoOutlineIcon.react"),{alt:h._("__JHASH__eaD8DB2Y83l__JHASH__")}),message:h._("__JHASH__1OyJfFu8aNw__JHASH__"),target:"bottom-left"},{duration:l})},a[0]=b,a[1]=d):d=a[1];return d}g["default"]=a}),226);
__d("IGDComposerEditContainer.react",["fbt","I64","IGDComposerEmojiButton.react","IGDInstamadilloUtils","IGDSBox.react","IGDSButton.react","IGDSIconButton.react","IGDSXFilledIcon.react","LexicalText","MAWEditMessageContext.react","MAWVault","MWXComposer.react","MessengerWebUXLogger","ReQL","ReQLSuspense","getIsMessageTimeBelowEditThreshold","isStringNullOrEmpty","issueEditInstamadilloMessage","promiseDone","react","useCancelEditingOnEsc","useMAWGetSendEditActionforOpen","useMWXComposerClearAndSendOnEnter","useMWXLexicalEditor","usePrepopulateLexicalEditor","useReStore","useServerTime","useShowNotEditableMessageToast"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react"));b=k;var m=b.useContext,n=b.useEffect;b.useMemo;var o=b.useState,p=b.c,q={cancelButton:{paddingTop:"xexx8yu",$$css:!0},emojiButton:{paddingBottom:"xg8j3zb",paddingEnd:"xg83lxy",paddingLeft:null,paddingRight:null,paddingStart:"x1sln4lm",paddingTop:"xyqdw3p",$$css:!0},sendButton:{paddingBottom:"xxbrewl",paddingEnd:"x1mn2t3i",paddingLeft:null,paddingRight:null,paddingStart:"x1k2j06m",paddingTop:"xm7lytj",$$css:!0}};function a(a){var b=p(54),e=a.editMessageData,g=a.headerText,k=a.onEditCancelCallback,r=a.onEditTriggerCallback;a=a.thread;var s=k===void 0?null:k,t=r===void 0?null:r;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(k={eventName:"composer_edit_message"},b[0]=k):k=b[0];r=c("MessengerWebUXLogger").useImpressionLoggerRef(k);var u=c("MessengerWebUXLogger").useInteractionLogger();k=m(d("MAWEditMessageContext.react").Context);var v=k.setEditMessageData;k=d("useMWXLexicalEditor").useMWXLexicalEditor();var w=k.editor,x=(i||(i=c("useReStore")))();b[1]!==x.tables.messages||b[2]!==e?(k=function(){return d("ReQL").fromTableAscending(x.tables.messages).getKeyRange(e==null?void 0:e.threadKey,e==null?void 0:e.timestampMs,e==null?void 0:e.messageId)},b[1]=x.tables.messages,b[2]=e,b[3]=k):k=b[3];var y=e==null?void 0:e.messageId,z=e==null?void 0:e.threadKey,A=e==null?void 0:e.timestampMs,B;b[4]!==x||b[5]!==y||b[6]!==z||b[7]!==A?(B=[x,y,z,A],b[4]=x,b[5]=y,b[6]=z,b[7]=A,b[8]=B):B=b[8];var C=d("ReQLSuspense").useFirst(k,B,f.id+":86");C==null?void 0:C.text;z=(y=C==null?void 0:C.text)!=null?y:"";b[9]!==z?(A=d("MAWVault").unvault(z).trim(),b[9]=z,b[10]=A):A=b[10];k=A;var D=k,E=c("useMAWGetSendEditActionforOpen")();B=c("useServerTime")();b[11]!==B||b[12]!==e.timestampMs?(y=d("getIsMessageTimeBelowEditThreshold").getIsMessageTimeBelowEditThreshold((j||(j=d("I64"))).of_float(B.getTime()),e.timestampMs),b[11]=B,b[12]=e.timestampMs,b[13]=y):y=b[13];var F=y,G=function(){if(!F){H();return!1}else{var a=w.getEditorState().read(d("LexicalText").$rootTextContent).trim();if(c("isStringNullOrEmpty")(a)||a===D)return!1;if(d("IGDInstamadilloUtils").isInstamadilloMessage(C)){var b={messageId:e.messageId,text:a,threadKey:e.threadKey};c("promiseDone")(c("issueEditInstamadilloMessage")(b))}else E(e.messageId,a);v(null);t&&t();u==null?void 0:u({eventName:"edit_message"});return!0}},H=c("useShowNotEditableMessageToast")();b[14]!==v||b[15]!==u||b[16]!==s?(z=function(){v(null),u==null?void 0:u({eventName:"edit_message_cancel"}),s&&s()},b[14]=v,b[15]=u,b[16]=s,b[17]=z):z=b[17];A=z;d("useCancelEditingOnEsc").useCancelEditingrOnEsc(w,v,s);b[18]!==w||b[19]!==G?(k={clearReplyState:null,editor:w,onSend:G},b[18]=w,b[19]=G,b[20]=k):k=b[20];c("useMWXComposerClearAndSendOnEnter")(k);B=o(!1);y=B[0];var I=B[1];b[21]!==w||b[22]!==D?(z=function(){return w.registerTextContentListener(function(a){a=a.trim();I(!c("isStringNullOrEmpty")(a)&&a!==D)})},k=[w,D],b[21]=w,b[22]=D,b[23]=z,b[24]=k):(z=b[23],k=b[24]);n(z,k);c("usePrepopulateLexicalEditor")(w,D,!0);B=a.threadKey;if(b[25]!==g){k=(z=g)!=null?z:h._("__JHASH__H49qASoDNlI__JHASH__");b[25]=g;b[26]=k}else k=b[26];b[27]===Symbol["for"]("react.memo_cache_sentinel")?(a=h._("__JHASH__I5lFIsyOgVe__JHASH__"),b[27]=a):a=b[27];b[28]===Symbol["for"]("react.memo_cache_sentinel")?(z=l.jsx(c("IGDSXFilledIcon.react"),{alt:h._("__JHASH__I5lFIsyOgVe__JHASH__"),color:"ig-primary-text",size:15}),b[28]=z):z=b[28];b[29]!==A?(g=l.jsx(c("IGDSIconButton.react"),{label:a,onClick:A,xstyle:q.cancelButton,children:z}),b[29]=A,b[30]=g):g=b[30];b[31]!==k||b[32]!==g?(a=l.jsx(d("MWXComposer.react").Header,{bodyText:k,"data-testid":void 0,hasTopBorder:!0,rightAddon:g},0),b[31]=k,b[32]=g,b[33]=a):a=b[33];b[34]!==w||b[35]!==B?(z=l.jsx(c("IGDSBox.react"),{xstyle:q.emojiButton,children:l.jsx(c("IGDComposerEmojiButton.react"),{editor:w,threadKey:B})}),b[34]=w,b[35]=B,b[36]=z):z=b[36];b[37]===Symbol["for"]("react.memo_cache_sentinel")?(A=l.jsx(d("MWXComposer.react").TextEditor,{testid:void 0}),b[37]=A):A=b[37];k=!y;b[38]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._("__JHASH__Xg6dtjiPieE__JHASH__"),b[38]=g):g=b[38];b[39]!==G?(B=function(){G()},b[39]=G,b[40]=B):B=b[40];b[41]!==k||b[42]!==B?(y=l.jsx(c("IGDSButton.react"),{"data-testid":void 0,display:"block",hidden:k,label:g,onClick:B,variant:"primary_link",xstyle:q.sendButton}),b[41]=k,b[42]=B,b[43]=y):y=b[43];b[44]!==z||b[45]!==y?(g=l.jsx(d("MWXComposer.react").Row,{children:l.jsx(c("IGDSBox.react"),{paddingX:1,paddingY:1,width:"100%",children:l.jsxs(d("MWXComposer.react").InputArea,{children:[z,A,y]})})}),b[44]=z,b[45]=y,b[46]=g):g=b[46];b[47]!==w||b[48]!==a||b[49]!==g?(k=l.jsx(d("MWXComposer.react").Composer,{editor:w,header:a,children:g}),b[47]=w,b[48]=a,b[49]=g,b[50]=k):k=b[50];b[51]!==r||b[52]!==k?(B=l.jsx(c("IGDSBox.react"),{containerRef:r,children:k}),b[51]=r,b[52]=k,b[53]=B):B=b[53];return B}g["default"]=a}),226);
__d("IGDComposerReplyView.react",["fbt","CometErrorBoundary.react","CometTriggerAccessibilityAlertContext","I64","IGDSIconButton.react","IGDSText.react","IGDSXFilledIcon.react","LSContactGenderToGenderConst","LSHotEmojiSize","LSIntEnum","LSMessagingThreadTypeUtil","LsFalcoEventEntryPoint","LsReplyRenderedFalcoEvent","MDSTextPairing.react","MWChatReplyText.react","MWPActor.react","MWPReplyContext.react","MessagingAttachmentType","ReQL","ReQLSuspense","getFBTSafeGenderFromGenderConst","isStringNullOrEmpty","react","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=j||(j=d("react"));b=j;var n=b.useContext,o=b.useEffect,p=b.c,q={cancelButton:{paddingTop:"xexx8yu",$$css:!0}};function r(a,b,e){var f=a.isUnsent;a=a.text;b=b||{};b=b.attachmentType;var g=!c("isStringNullOrEmpty")(a);if(f)return h._("__JHASH__JCseFdR_8CQ__JHASH__");if(g){return m.jsx(c("MWChatReplyText.react"),{isHotLike:e,mentionIds:null,text:(f=a)!=null?f:h._("__JHASH__niT7GfOrAW1__JHASH__").toString(),transformEmoticons:!1})}if(b)if((k||(k=d("I64"))).equal(b,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)))return h._("__JHASH__O5FbckBKjss__JHASH__");else if((k||(k=d("I64"))).equal(b,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER)))return h._("__JHASH__sAL54A0QrH4__JHASH__");else if((k||(k=d("I64"))).equal(b,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return h._("__JHASH__f7tz0r8St5p__JHASH__");else if((k||(k=d("I64"))).equal(b,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)))return h._("__JHASH__oLHsOposBZ7__JHASH__");else return h._("__JHASH__C_JL7zn5dqE__JHASH__");else return h._("__JHASH__niT7GfOrAW1__JHASH__")}r.displayName=r.name+" [from "+f.id+"]";function s(a,b){if(b)return h._("__JHASH__LByR5v-54e3__JHASH__");if(!a)return h._("__JHASH__lRWnkiJRzRt__JHASH__",[h._param("Placeholder for an unknown user on Instagram","Instagram User")]);else{return h._("__JHASH__gMDBIOKzAoP__JHASH__",[h._param("name",m.jsx(c("IGDSText.react"),{size:"body",weight:"semibold",children:(b=a.firstName)!=null?b:a.name}),[1,c("getFBTSafeGenderFromGenderConst")(c("LSContactGenderToGenderConst")(a.gender))])])}}function t(a){var b=p(35),e=a.isArmadilloSecureThread;a=a.message;var g=(i||(i=c("useReStore")))(),h=d("MWPActor.react").useActor(),j=a.hotEmojiSize,n=a.messageId,q=a.senderId,t=a.text,u=a.threadKey;h=(k||(k=d("I64"))).equal(q,h);var v;b[0]!==g.tables.contacts||b[1]!==q?(v=function(){return d("ReQL").fromTableAscending(g.tables.contacts).getKeyRange(q)},b[0]=g.tables.contacts,b[1]=q,b[2]=v):v=b[2];var w;b[3]!==g||b[4]!==q?(w=[g,q],b[3]=g,b[4]=q,b[5]=w):w=b[5];v=d("ReQLSuspense").useFirst(v,w,f.id+":206");b[6]!==g.tables.attachments||b[7]!==u||b[8]!==n?(w=function(){return d("ReQL").fromTableAscending(g.tables.attachments).getKeyRange(u,n)},b[6]=g.tables.attachments,b[7]=u,b[8]=n,b[9]=w):w=b[9];var x;b[10]!==g||b[11]!==n||b[12]!==u?(x=[g,n,u],b[10]=g,b[11]=n,b[12]=u,b[13]=x):x=b[13];w=d("ReQLSuspense").useFirst(w,x,f.id+":211");var y;b[14]===Symbol["for"]("react.memo_cache_sentinel")?(x=function(){c("LsReplyRenderedFalcoEvent").log(function(){return{funnel:{entry_point:d("LsFalcoEventEntryPoint").messageActions}}})},y=[],b[14]=x,b[15]=y):(x=b[14],y=b[15]);o(x,y);b[16]!==j||b[17]!==t||b[18]!==e?(x=j!=null?t!=null&&t==="\ud83d\udc4d"&&((k||(k=d("I64"))).equal(j,(l||(l=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL))||(k||(k=d("I64"))).equal(j,(l||(l=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").MEDIUM))||(k||(k=d("I64"))).equal(j,(l||(l=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").LARGE)))&&e:!1,b[16]=j,b[17]=t,b[18]=e,b[19]=x):x=b[19];y=x;b[20]===Symbol["for"]("react.memo_cache_sentinel")?(j="xmo9yow",b[20]=j):j=b[20];t=c("MDSTextPairing.react");e=c("IGDSText.react");x="body";v=s(v,h);b[21]!==e||b[22]!==v?(h=m.jsxs(e,{size:x,children:[v," "]}),b[21]=e,b[22]=v,b[23]=h):h=b[23];b[24]!==a||b[25]!==w||b[26]!==y?(x=r(a,w,y),b[24]=a,b[25]=w,b[26]=y,b[27]=x):x=b[27];b[28]!==t||b[29]!==h||b[30]!==x?(e=m.jsx(t,{body:h,level:3,meta:x}),b[28]=t,b[29]=h,b[30]=x,b[31]=e):e=b[31];b[32]!==j||b[33]!==e?(v=m.jsx("div",{className:j,children:e}),b[32]=j,b[33]=e,b[34]=v):v=b[34];return v}function u(a){var b=p(16),e=a.isArmadilloSecureThread;a=a.message;var f=a.threadKey,g=n(d("MWPReplyContext.react").MWPReplyContext),i=g.clearReply,j=n(c("CometTriggerAccessibilityAlertContext"));b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g="x1cy8zhl xvbhtw8 x5ur3kl x13fuv20 x178xt8z x78zum5 x1qughib xg8j3zb x14uny0o xvpee5o x889kno",b[0]=g):g=b[0];var k;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(k=function(){return m.jsx(c("IGDSText.react"),{size:"body",children:h._("__JHASH__viMkwR52t0r__JHASH__")})},b[1]=k):k=b[1];b[2]!==e||b[3]!==a?(k=m.jsx(c("CometErrorBoundary.react"),{fallback:k,children:m.jsx(t,{isArmadilloSecureThread:e,message:a})}),b[2]=e,b[3]=a,b[4]=k):k=b[4];b[5]===Symbol["for"]("react.memo_cache_sentinel")?(e=h._("__JHASH__3xvXvnMysnL__JHASH__"),b[5]=e):e=b[5];b[6]!==i||b[7]!==f||b[8]!==j?(a=function(){i(f,!0),j(h._("__JHASH__keIifXRjlIX__JHASH__"),{assertive:!1})},b[6]=i,b[7]=f,b[8]=j,b[9]=a):a=b[9];var l;b[10]===Symbol["for"]("react.memo_cache_sentinel")?(l=m.jsx(c("IGDSXFilledIcon.react"),{alt:h._("__JHASH__3xvXvnMysnL__JHASH__"),color:"ig-primary-text",size:12}),b[10]=l):l=b[10];b[11]!==a?(e=m.jsx(c("IGDSIconButton.react"),{label:e,onClick:a,xstyle:q.cancelButton,children:l}),b[11]=a,b[12]=e):e=b[12];b[13]!==k||b[14]!==e?(l=m.jsxs("div",{className:g,"data-testid":void 0,children:[k,e]}),b[13]=k,b[14]=e,b[15]=l):l=b[15];return l}function a(a){var b=p(15),e=a.messageId,g=a.messageTimestamp;a=a.thread;var h=(i||(i=c("useReStore")))(),j=a.threadKey;a=a.threadType;var k;b[0]!==a?(k=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),b[0]=a,b[1]=k):k=b[1];a=k;b[2]!==h.tables.messages||b[3]!==j||b[4]!==g||b[5]!==e?(k=function(){return d("ReQL").fromTableAscending(h.tables.messages).getKeyRange(j,g,e)},b[2]=h.tables.messages,b[3]=j,b[4]=g,b[5]=e,b[6]=k):k=b[6];var l;b[7]!==h||b[8]!==j||b[9]!==e||b[10]!==g?(l=[h,j,e,g],b[7]=h,b[8]=j,b[9]=e,b[10]=g,b[11]=l):l=b[11];k=d("ReQLSuspense").useFirst(k,l,f.id+":325");b[12]!==k||b[13]!==a?(l=k?m.jsx(u,{isArmadilloSecureThread:a,message:k}):null,b[12]=k,b[13]=a,b[14]=l):l=b[14];return l}g["default"]=a}),226);
__d("IGDEqualityUtils",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){return Array.isArray(a)&&a.length===2&&Number.isInteger(a[0])&&Number.isInteger(a[1])}function j(a,b){return a!==b&&i(a)&&i(b)?(h||(h=d("I64"))).equal(a,b):a===b}function a(a,b){return k(a,b,j)}function k(a,b,c){c===void 0&&(c=function(a,b){return a===b});if(c(a,b))return!0;if(typeof a!=="object"||a===null||typeof b!=="object"||b===null)return!1;var d=Object.keys(a),e=Object.keys(b);if(d.length!==e.length)return!1;for(e=0;e<d.length;e++)if(!c(a[d[e]],b[d[e]],d[e]))return!1;return!0}g.shallowEqualI64=a;g.shallowEqual=k}),98);
__d("IGDSupportedFileTypes",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a?[".png",".jpg",".jpeg"]:["audio/*",".mp4",".mov",".png",".jpg",".jpeg"]}f.getIGDSupportedFileTypes=a}),66);
__d("IGDOpenComposer.react",["DisappearingMessagesMode","I64","IGDAiAgentsUtils","IGDComposerEditContainer.react","IGDComposerReplyView.react","IGDComposerView.react","IGDDMModeContextProvider","IGDEqualityUtils","IGDInstamadilloUtils","IGDSupportedFileTypes","LSIntEnum","LSPendingTasksPluginType","MWMediaManager","MWPReplyContext.react","react","useIGDDeviceType","useIGDMediaMangerUploadFailedToast","useMAWEditMessageData","useMWPComposerEditor","useMWV2FileDropzoneRegisterHandler","useMWV2OnSendOpenMessage","useOnTypingStateChanged","useStableCallback","useStableValue"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));b=h;b.useCallback;var l=b.useContext;b.useMemo;var m=b.c;function n(a){var b=m(35),e=a.onSendMessage;a=a.thread;var f=l(d("MWPReplyContext.react").MWPReplyContext);f=f.reply;var g=c("useMAWEditMessageData")(),h=c("useIGDMediaMangerUploadFailedToast")(),i;b[0]!==h||b[1]!==a?(i={showUploadFailureToast:h,thread:a},b[0]=h,b[1]=a,b[2]=i):i=b[2];h=d("MWMediaManager").useMediaManager(i);i=h.handleFileSelect;var j=c("useOnTypingStateChanged")(a),n=a.threadSubtype,o;b[3]!==n?(o=d("IGDAiAgentsUtils").isAiThread(n),b[3]=n,b[4]=o):o=b[4];n=o;c("useMWV2FileDropzoneRegisterHandler")(i);o=d("useIGDDeviceType").useIGDDeviceType().isMobile;var p;b[5]!==h.mediaStaging||b[6]!==e||b[7]!==j||b[8]!==a.threadKey?(p={isPreviewThread:!1,mediaStaging:h.mediaStaging,onSendMessage:e,onTypingStateChanged:j,threadKey:a.threadKey},b[5]=h.mediaStaging,b[6]=e,b[7]=j,b[8]=a.threadKey,b[9]=p):p=b[9];h=c("useMWPComposerEditor")(p);var q=h.editor;j=h.editorElementRef;p=h.hasStuffToSend;h=h.sendMessage;var r;b[10]!==e||b[11]!==q?(r=function(){for(var b=arguments.length,a=new Array(b),c=0;c<b;c++)a[c]=arguments[c];var d=a;e.apply(void 0,d);q.focus(function(){})},b[10]=e,b[11]=q,b[12]=r):r=b[12];r=r;var s;b[13]!==f||b[14]!==a?(s=f!=null?k.jsx(c("IGDComposerReplyView.react"),{messageId:f.messageId,messageTimestamp:f.timestampMs,thread:a}):null,b[13]=f,b[14]=a,b[15]=s):s=b[15];var t;b[16]!==g||b[17]!==a?(t=g!=null&&k.jsx(c("IGDComposerEditContainer.react"),{editMessageData:g,thread:a}),b[16]=g,b[17]=a,b[18]=t):t=b[18];var u;b[19]!==g||b[20]!==f||b[21]!==o||b[22]!==n||b[23]!==q||b[24]!==j||b[25]!==p||b[26]!==i||b[27]!==r||b[28]!==h||b[29]!==a?(u=g==null?k.jsx(c("IGDComposerView.react"),{attachmentsSupported:f==null,editor:q,editorElementRef:j,emojisSupported:!o&&!n,hasStuffToSend:p,onAttachmentsAdded:i,onSendMessage:r,policyProduct:"messaging_lightswitch",sendMessage:h,supportedFileTypes:d("IGDSupportedFileTypes").getIGDSupportedFileTypes(o),surface:"mwp_igd_composer",thread:a}):null,b[19]=g,b[20]=f,b[21]=o,b[22]=n,b[23]=q,b[24]=j,b[25]=p,b[26]=i,b[27]=r,b[28]=h,b[29]=a,b[30]=u):u=b[30];b[31]!==s||b[32]!==t||b[33]!==u?(g=k.jsxs("div",{children:[s,t,u]}),b[31]=s,b[32]=t,b[33]=u,b[34]=g):g=b[34];return g}function a(a){var b=m(18),e=a.afterSendMessage;a=a.thread;var f=l(d("IGDDMModeContextProvider").IGDDMModeContext),g=f.dmMode;f=f.lastSetTtlSec;var h;b[0]!==a?(h=d("IGDInstamadilloUtils").isInstamadilloTransportEnabled(a)?(i||(i=d("LSIntEnum"))).ofNumber(c("LSPendingTasksPluginType").IGD_INSTAMADILLO):void 0,b[0]=a,b[1]=h):h=b[1];h=h;var p;b[2]!==g||b[3]!==f?(p=g===c("DisappearingMessagesMode").ON&&f!=null?(j||(j=d("I64"))).of_int32(f):void 0,b[2]=g,b[3]=f,b[4]=p):p=b[4];g=o(a,e,h,p);b[5]!==a.authorityLevel||b[6]!==a.capabilities||b[7]!==a.capabilities2||b[8]!==a.capabilities3||b[9]!==a.capabilities4||b[10]!==a.consistentThreadFbid||b[11]!==a.threadKey||b[12]!==a.threadSubtype||b[13]!==a.threadType?(f={authorityLevel:a.authorityLevel,capabilities:a.capabilities,capabilities2:a.capabilities2,capabilities3:a.capabilities3,capabilities4:a.capabilities4,consistentThreadFbid:a.consistentThreadFbid,threadKey:a.threadKey,threadSubtype:a.threadSubtype,threadType:a.threadType},b[5]=a.authorityLevel,b[6]=a.capabilities,b[7]=a.capabilities2,b[8]=a.capabilities3,b[9]=a.capabilities4,b[10]=a.consistentThreadFbid,b[11]=a.threadKey,b[12]=a.threadSubtype,b[13]=a.threadType,b[14]=f):f=b[14];e=d("useStableValue").useStableValue(f,d("IGDEqualityUtils").shallowEqualI64);b[15]!==g||b[16]!==e?(h=k.jsx(n,{onSendMessage:g,thread:e}),b[15]=g,b[16]=e,b[17]=h):h=b[17];p=h;return p}function o(a,b,d,e){var f=m(5),g;f[0]!==b||f[1]!==e||f[2]!==d||f[3]!==a?(g={afterSendMessage:b,ephemeralDurationInSec:e,pluginType:d,skipUrlPreviewGen:!1,thread:a},f[0]=b,f[1]=e,f[2]=d,f[3]=a,f[4]=g):g=f[4];b=c("useMWV2OnSendOpenMessage")(g);return c("useStableCallback")(b)}g["default"]=a}),98);
__d("IGDReachableInviteBanner.react",["fbt","FBLogger","I64","Link.react","MWPActor.react","MWXComposerBanner.react","MessengerWebUXLogger","ReQL","ReQLSuspense","XInstagramHelpDotComContentControllerRouteBuilder","react","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=(k||(k=d("react"))).c,m=k;function a(a){var b=l(12),e=a.loggingEventName,g=a.threadKey,k=(i||(i=c("useReStore")))(),n=d("MWPActor.react").useActor();a=(a=d("ReQLSuspense").useFirst(function(){return d("ReQL").mergeJoin(d("ReQL").fromTableAscending(k.tables.participants).getKeyRange(g).filter(function(a){a=a.contactId;return!(j||(j=d("I64"))).equal(a,n)}),d("ReQL").fromTableAscending(k.tables.contacts))},[k.tables.contacts,k.tables.participants,g,n],f.id+":35"))!=null?a:[null,null];a[0];a=a[1];var o;b[0]!==e?(o={eventName:e},b[0]=e,b[1]=o):o=b[1];e=c("MessengerWebUXLogger").useImpressionLoggerRef(o);if(a==null){c("FBLogger")("igd_web_on_msgr").mustfix("Contact data is null in IGDReachableInviteBanner");return null}if(b[2]===Symbol["for"]("react.memo_cache_sentinel")){o=(o=c("XInstagramHelpDotComContentControllerRouteBuilder").buildUri({cms_id:"477434105621119"}).setDomain("help.instagram.com"))==null?void 0:(o=o.setProtocol("https"))==null?void 0:o.toString();b[2]=o}else o=b[2];o=o;var p;b[3]!==a.name||b[4]!==a.secondaryName?(p=h._("__JHASH__VAB8HOi8pL6__JHASH__",[h._param("name",a.name),h._param("secondaryName",a.secondaryName)]),b[3]=a.name,b[4]=a.secondaryName,b[5]=p):p=b[5];a=p;b[6]!==o?(p=h._("__JHASH__pAAhQpP4V9i__JHASH__",[h._param("link",m.jsx(c("Link.react"),{href:o,children:"Community Guidelines"}))]),b[6]=o,b[7]=p):p=b[7];o=p;b[8]!==o||b[9]!==a||b[10]!==e?(p=m.jsx(c("MWXComposerBanner.react"),{bodyText:o,headerText:a,ref:e}),b[8]=o,b[9]=a,b[10]=e,b[11]=p):p=b[11];return p}g["default"]=a}),226);
__d("IGDTLCBlockedComposer.react",["fbt","IGDThreadListNewMessageLoggingDataContext","MWXComposerBanner.react","MessengerWebUXLogger","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=(i||(i=d("react"))).c,k=i;function a(a){var b=j(8),e=a.extraLoggingData;a=a.loggingEventName;var f;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(f=h._("__JHASH__WSxsd-683e3__JHASH__"),b[0]=f):f=b[0];f=f;var g;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(g=h._("__JHASH__Iv_ZxhLNItG__JHASH__"),b[1]=g):g=b[1];g=g;var i=d("IGDThreadListNewMessageLoggingDataContext").useFlowInstanceIdContext(),l;b[2]!==a||b[3]!==e||b[4]!==i?(l={eventName:a,extraData:e,flowInstanceId:i},b[2]=a,b[3]=e,b[4]=i,b[5]=l):l=b[5];a=c("MessengerWebUXLogger").useImpressionLoggerRef(l);b[6]!==a?(e=k.jsx(c("MWXComposerBanner.react"),{bodyText:g,headerText:f,ref:a}),b[6]=a,b[7]=e):e=b[7];return e}g["default"]=a}),226);
__d("MWPartnershipThreadUnavailableComposer.react",["fbt","MWXComposerBanner.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=h._("__JHASH__XeF0QDXHg_1__JHASH__");function a(){return j.jsx(c("MWXComposerBanner.react"),{bodyText:k})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("usePrecompileURLMatcher",["URLMatcher","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.c,k=!1;function a(){var a=j(2),b,d;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=function(){if(k)return;k=!0;c("URLMatcher").compilePermissiveHostPathMatcher()},d=[],a[0]=b,a[1]=d):(b=a[0],d=a[1]);i(b,d)}g["default"]=a}),98);
__d("IGDComposerCommon.react",["CometErrorBoundary.react","CometPlaceholder.react","I64","IGDDisappearingMessagesBlockedComposer.react","IGDInstamadilloUtils","IGDInviteModelUtils","IGDOpenComposer.react","IGDReachableInviteBanner.react","IGDTLCBlockedComposer.react","Int64Hooks","JSResourceForInteraction","LSContactBitOffset","LSContactBlockedByViewerStatus","LSContactReachabilityStatusType","LSIntEnum","LSMessagingThreadTypeUtil","LSNullstateCTAType","LSThreadBitOffset","MWCMThreadTypes.react","MWPActor.react","MWPartnershipThreadUnavailableComposer.react","MWV2ErrorComposer.react","ReQL","ReQLSuspense","RecoverableViolation.react","ThreadStatus","WebUXLoggingSurfaceContextProvider","getInstamadilloLoggingExtraData","isFeatureLimitEnabled","lazyLoadComponent","qex","react","useIsIGDDisappearingMessagesEnabledForThread","useIsReadOnlyFeatureLimited","usePrecompileURLMatcher","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(i||(i=d("react"))).c,m=i,n=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGDFeatureLimitsBlockedComposer.react").__setRef("IGDComposerCommon.react")),o=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPLeftGroupComposer.react").__setRef("IGDComposerCommon.react")),p=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWPCannotReplyFallbackComposer.react").__setRef("IGDComposerCommon.react")),q=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGDComposerRestricted.react").__setRef("IGDComposerCommon.react")),r=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGDUnavailableComposer.react").__setRef("IGDComposerCommon.react")),s=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGDBlockedUserComposer.react").__setRef("IGDComposerCommon.react")),t=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGDChannelEndedComposer.react").__setRef("IGDComposerCommon.react")),u=c("lazyLoadComponent")(c("JSResourceForInteraction")("IGDInviteSentComposer.react").__setRef("IGDComposerCommon.react"));function v(a){var b=l(3);a=a.height;a=a;var c;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(c="x1exxf4d x13fuv20 x178xt8z",b[0]=c):c=b[0];a=a.toString()+"px";b[1]!==a?(c=m.jsx("div",{className:c,style:{height:a}}),b[1]=a,b[2]=c):c=b[2];return c}function w(a){var b=l(10),e=a.afterSendMessage,f=a.showReachableInviteBanner;a=a.thread;var g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=function(){return m.jsx(c("MWV2ErrorComposer.react"),{})},b[0]=g):g=b[0];var h;b[1]!==f||b[2]!==a?(h=f&&m.jsx(c("IGDReachableInviteBanner.react"),{loggingEventName:"igd_invite_model_reachable_banner",threadKey:a.threadKey}),b[1]=f,b[2]=a,b[3]=h):h=b[3];b[4]!==e||b[5]!==a?(f=m.jsx(c("IGDOpenComposer.react"),{afterSendMessage:e,thread:a}),b[4]=e,b[5]=a,b[6]=f):f=b[6];b[7]!==h||b[8]!==f?(e=m.jsx(c("CometErrorBoundary.react"),{fallback:g,children:m.jsx(c("CometPlaceholder.react"),{fallback:null,children:m.jsxs(d("WebUXLoggingSurfaceContextProvider").WebUXSurfaceLoggingContext.Provider,{value:"thread_chat_composer",children:[h,f]})})}),b[7]=h,b[8]=f,b[9]=e):e=b[9];return e}function x(a){var b=l(8),e=a.afterSendMessage;a=a.thread;var f=a.cannotReplyReason==="viewer_not_subscribed"||a.cannotReplyReason==="read_only",g=a.threadStatus!=null&&(j||(j=d("I64"))).equal(a.threadStatus,(j||(j=d("I64"))).of_int32(c("ThreadStatus").PAUSED)),h=a.threadSubtype!=null&&d("MWCMThreadTypes.react").isIGBroadcastChannelThread(a.threadSubtype),i=a.cannotReplyReason==="partnership_thread_disabled_for_creator";if(f){b[0]!==a?(f=m.jsx(o,{thread:a}),b[0]=a,b[1]=f):f=b[1];return f}else if(h&&g){b[2]===Symbol["for"]("react.memo_cache_sentinel")?(f=m.jsx(t,{}),b[2]=f):f=b[2];return f}else if(i){b[3]===Symbol["for"]("react.memo_cache_sentinel")?(h=m.jsx(c("MWPartnershipThreadUnavailableComposer.react"),{}),b[3]=h):h=b[3];return h}else if(a.cannotReplyReason!=null){b[4]===Symbol["for"]("react.memo_cache_sentinel")?(g=m.jsx(p,{}),b[4]=g):g=b[4];return g}b[5]!==e||b[6]!==a?(f=m.jsx(w,{afterSendMessage:e,showReachableInviteBanner:!1,thread:a}),b[5]=e,b[6]=a,b[7]=f):f=b[7];return f}function y(a){var b=l(27),e=a.afterSendMessage,f=a.otherUser;a=a.thread;var g=!(j||(j=d("I64"))).equal(f.blockedByViewerStatus,(k||(k=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED)),h=d("LSContactBitOffset").has(0,f),i=d("LSContactBitOffset").has(1,f);h=!h||!i;i=f.blockedSinceTimestampMs!=null?!1:h;h=f.contactReachabilityStatusType;var n;b[0]!==h?(n=h!=null?(j||(j=d("I64"))).equal((k||(k=d("LSIntEnum"))).ofNumber(c("LSContactReachabilityStatusType").REACHABLE_INVITE_BANNER),h):!1,b[0]=h,b[1]=n):n=b[1];n=n;var o=h!=null?(j||(j=d("I64"))).equal((k||(k=d("LSIntEnum"))).ofNumber(c("LSContactReachabilityStatusType").UNREACHABLE_INVITE_BLOCK),h):!1;h=h!=null?(j||(j=d("I64"))).equal((k||(k=d("LSIntEnum"))).ofNumber(c("LSContactReachabilityStatusType").REACHABLE),h)||n||o:!0;var p=d("LSContactBitOffset").has(66,f),t=c("useIsIGDDisappearingMessagesEnabledForThread")(a.threadKey),x=a!=null?d("LSThreadBitOffset").has(214,a):!1;t=t&&d("IGDInstamadilloUtils").isDMHardblockedEnabled();x=x&&c("qex")._("426")===!0;var y;b[2]!==a?(y=c("getInstamadilloLoggingExtraData")(a),b[2]=a,b[3]=y):y=b[3];y=y;if(h)if(g){b[4]===Symbol["for"]("react.memo_cache_sentinel")?(h=m.jsx(v,{height:189}),b[4]=h):h=b[4];b[5]!==f||b[6]!==a?(g=m.jsx(c("CometPlaceholder.react"),{fallback:h,children:m.jsx(s,{contact:f,thread:a})}),b[5]=f,b[6]=a,b[7]=g):g=b[7];return g}else if(p){b[8]===Symbol["for"]("react.memo_cache_sentinel")?(h=m.jsx(v,{height:128}),b[8]=h):h=b[8];b[9]!==f||b[10]!==a?(g=m.jsx(c("CometPlaceholder.react"),{fallback:h,children:m.jsx(q,{contact:f,thread:a})}),b[9]=f,b[10]=a,b[11]=g):g=b[11];return g}else if(i){b[12]===Symbol["for"]("react.memo_cache_sentinel")?(p=m.jsx(r,{}),b[12]=p):p=b[12];return p}else if(x){b[13]===Symbol["for"]("react.memo_cache_sentinel")?(h=m.jsx(v,{height:128}),b[13]=h):h=b[13];b[14]!==y?(f=m.jsx(c("CometPlaceholder.react"),{fallback:h,children:m.jsx(c("IGDTLCBlockedComposer.react"),{extraLoggingData:y,loggingEventName:"igd_fallback_thread_disabled"})}),b[14]=y,b[15]=f):f=b[15];return f}else if(t){b[16]===Symbol["for"]("react.memo_cache_sentinel")?(g=m.jsx(v,{height:128}),b[16]=g):g=b[16];b[17]!==y?(i=m.jsx(c("CometPlaceholder.react"),{fallback:g,children:m.jsx(c("IGDDisappearingMessagesBlockedComposer.react"),{extraLoggingData:y,loggingEventName:"igd_fallback_thread_disabled"})}),b[17]=y,b[18]=i):i=b[18];return i}else if(o&&d("IGDInviteModelUtils").shouldUseInviteModelWithExposure()){b[19]===Symbol["for"]("react.memo_cache_sentinel")?(p=m.jsx(u,{loggingEventName:"igd_invite_model_invite_sent"}),b[19]=p):p=b[19];return p}else{b[20]!==n?(x=n&&d("IGDInviteModelUtils").shouldUseInviteModelWithoutExposure(),b[20]=n,b[21]=x):x=b[21];b[22]!==e||b[23]!==x||b[24]!==a?(h=m.jsx(w,{afterSendMessage:e,showReachableInviteBanner:x,thread:a}),b[22]=e,b[23]=x,b[24]=a,b[25]=h):h=b[25];return h}else{b[26]===Symbol["for"]("react.memo_cache_sentinel")?(f=m.jsx(r,{}),b[26]=f):f=b[26];return f}}function z(a){var b=l(34),e=a.afterSendMessage,g=a.hasActivity,i=a.thread,o=(h||(h=c("useReStore")))(),p=d("MWPActor.react").useActor();b[0]!==o.tables.thread_nullstate||b[1]!==i.threadKey?(a=function(){return d("ReQL").fromTableAscending(o.tables.thread_nullstate).getKeyRange(i.threadKey)},b[0]=o.tables.thread_nullstate,b[1]=i.threadKey,b[2]=a):a=b[2];var q;b[3]!==o||b[4]!==i.threadKey?(q=[o,i.threadKey],b[3]=o,b[4]=i.threadKey,b[5]=q):q=b[5];a=d("ReQLSuspense").useFirst(a,q,f.id+":431");b[6]!==a?(q=a!=null?(j||(j=d("I64"))).equal(a.ctaType,(k||(k=d("LSIntEnum"))).ofNumber(c("LSNullstateCTAType").GET_STARTED)):!1,b[6]=a,b[7]=q):q=b[7];a=q;q=g;b[8]!==o.tables.participants||b[9]!==o.tables.contacts||b[10]!==i.threadKey?(g=function(){return d("ReQL").mergeJoin(d("ReQL").fromTableAscending(o.tables.participants,[]).getKeyRange(i.threadKey),d("ReQL").fromTableAscending(o.tables.contacts,["id","name","secondaryName","blockedByViewerStatus","capabilities","capabilities2","blockedSinceTimestampMs","contactTypeExact","contactReachabilityStatusType"]))},b[8]=o.tables.participants,b[9]=o.tables.contacts,b[10]=i.threadKey,b[11]=g):g=b[11];var r;b[12]!==o||b[13]!==i.threadKey?(r=[o,i.threadKey],b[12]=o,b[13]=i.threadKey,b[14]=r):r=b[14];var s=d("ReQLSuspense").useArray(g,r,f.id+":448");b[15]!==s||b[16]!==p?(g=function(){if(s.length===1){var a=s[0];a=a[1].id;return(j||(j=d("I64"))).equal(p,a)}return!1},r=[p,s],b[15]=s,b[16]=p,b[17]=g,b[18]=r):(g=b[17],r=b[18]);var t=d("Int64Hooks").useMemoInt64(g,r);b[19]!==i.threadType||b[20]!==s||b[21]!==t||b[22]!==p?(g=function(){if(!d("LSMessagingThreadTypeUtil").isOneToOne(i.threadType))return;if(s.length===1){var a=s[0];if(t)return a}return s.find(function(a){a[0];a=a[1];return!(j||(j=d("I64"))).equal(a.id,p)})},r=[p,t,s,i.threadType],b[19]=i.threadType,b[20]=s,b[21]=t,b[22]=p,b[23]=g,b[24]=r):(g=b[23],r=b[24]);g=d("Int64Hooks").useMemoInt64(g,r);r=d("LSMessagingThreadTypeUtil").isArmadilloSecure(i.threadType);r=c("useIsReadOnlyFeatureLimited")()&&(!r||c("isFeatureLimitEnabled")());var u;b[25]!==a||b[26]!==q||b[27]!==r||b[28]!==i||b[29]!==g||b[30]!==e?(u=a&&!q?null:r?m.jsx(n,{}):d("LSMessagingThreadTypeUtil").isOneToOne(i.threadType)?g!=null?m.jsx(y,{afterSendMessage:e,otherUser:g[1],thread:i}):m.jsx(c("RecoverableViolation.react"),{errorMessage:"Missing contact row",projectName:"messenger_comet"}):m.jsx(x,{afterSendMessage:e,thread:i}),b[25]=a,b[26]=q,b[27]=r,b[28]=i,b[29]=g,b[30]=e,b[31]=u):u=b[31];b[32]!==u?(a=m.jsx(m.Fragment,{children:u}),b[32]=u,b[33]=a):a=b[33];return a}function a(a){var b=l(11),e=a.afterSendMessage,g=a.thread,i=(h||(h=c("useReStore")))();c("usePrecompileURLMatcher")();b[0]!==i.tables.threads||b[1]!==g.threadKey?(a=function(){return d("ReQL").fromTableAscending(i.tables.threads,["lastActivityTimestampMs"]).getKeyRange(g.threadKey).map(function(a){return a.lastActivityTimestampMs})},b[0]=i.tables.threads,b[1]=g.threadKey,b[2]=a):a=b[2];var k;b[3]!==i||b[4]!==g.threadKey?(k=[i,g.threadKey],b[3]=i,b[4]=g.threadKey,b[5]=k):k=b[5];a=d("ReQLSuspense").useFirst(a,k,f.id+":558");k=a!=null?!(j||(j=d("I64"))).equal(a,(j||(j=d("I64"))).zero):!0;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(a=function(){return m.jsx(c("MWV2ErrorComposer.react"),{})},b[6]=a):a=b[6];b[7]!==e||b[8]!==k||b[9]!==g?(a=m.jsx(c("CometErrorBoundary.react"),{fallback:a,children:m.jsx(c("CometPlaceholder.react"),{fallback:null,children:m.jsx(z,{afterSendMessage:e,hasActivity:k,thread:g})})}),b[7]=e,b[8]=k,b[9]=g,b[10]=a):a=b[10];return a}g.IGDComposerCommonPlaceholder=v;g.IGDComposerCommon=a}),98);